<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Philippe Mongeau</title>
<link media="all" href="/css/style.css" type="text/css" rel="stylesheet" />
</head>
<body>
<header>
    <h1><a href="/">PhMongeau</a></h1>
</header>
<div id="content">
    <ul class="imglist">
        <span>stuff</span>
        <li class="fade">
            <img src="/images/010_barBeauty.png" />
        <span class="imgcaption"> A caption </span>
        </li>
        <li class="fade">
            <img src="/images/chaise_01.jpg" />
        </li>
        <li class="fade">
            <img src="/images/chaise_02.jpg" />
        </li>
        <li class="fade">
            <img src="/images/mongeaup_bertrand_2.jpg" />
        </li>
        <li class="fade">
            <img src="/images/mongeaup_bertrand_3.jpg" />
        </li>
    </ul>
    <div class="imgmain">
        <img id="mainimg" src="" alt="" />
        <span class="imgcaption"> A caption </span>
    </div>
</div>
</body>
<script type="text/javascript">
    var $ = function(sel) {
        return Array.prototype.slice.call(document.querySelectorAll(sel));
    }
    window.onload = function() {
        var images = document.querySelectorAll(".fade img");
        var mainImg = document.getElementById("mainimg");
        for (var i = 0; i < images.length; ++i) {
            var img = images[i];
            img.index = i;

            img.onclick = function() {
                window.history.replaceState({}, "", "/#"+this.index);

                $(".slideout").forEach(function(v,i,a) {
                        v.classList.remove('slideout');
                });
                this.classList.add('slideout');

                mainImg.classList.add("fadeIn");
                mainImg.src = this.src;


                window.setTimeout(function() {
                    mainImg.classList.remove("fadeIn")
                }, 500);
            }
        }

        if(window.location.hash) {
            var index = window.location.hash.substr(1);
            mainImg.src = images[index].src;
            images[index].classList.add("slideout");
        }
        else {
            mainImg.src = images[0].src;
        }
    }
</script>
</html>
